# Contributor: Stefan Wagner <stw@bit-strickerei.de>
# Maintainer: Stefan Wagner <stw@bit-strickerei.de>
pkgname=meta.sr.ht
pkgver=0.9.4
pkgrel=1
pkgdesc="sr.ht core account services"
url="https://git.sr.ht/~sircmpwn/meta.sr.ht"
arch="noarch"
license="GPLv2"
options="!check"
depends="py3-core.sr.ht py3-pgpy py3-sshpubkeys py3-pystache py3-pyotp py3-qrcode
	py3-redis py3-bcrypt"
makedepends="python3-dev py-setuptools"
install=""
source="http://git.sr.ht/~sircmpwn/$pkgname/snapshot/$pkgname-$pkgver.tar.xz"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	python3 setup.py build
}

package() {
	cd "$builddir"
	python3 setup.py install --prefix=/usr --root="$pkgdir" --optimize=1
	install -Dm644 config.ini.example "$pkgdir"/etc/sr.ht/meta.ini.example
}

sha512sums="5a112dff5ea3acef1d4ca5197029a1d332a7b410b83122ccbf3037ce7766fcf961d14a4ecd2e7f2047280fb40941c092a36ce31b19c6e3e658a6fd6d340cf693  meta.sr.ht-0.9.4.tar.xz"
